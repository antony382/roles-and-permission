function ifChecked(e){$(document).on("ifChecked",e,function(e,t){var n=$(this).attr("data-child-class");$("input."+n).iCheck("check")})}function ifUnchecked(e){$(document).on("ifUnchecked",e,function(e,t){var n=$(this).attr("data-child-class");$("input."+n).iCheck("uncheck")})}function SaveRAP(){var e={role_id:roll_id};$(".permission").each(function(){$(this).parent().hasClass("checked")?e[$(this).attr("name")]=1:e[$(this).attr("name")]=0}),AJAX.AjaxHelper.POSTRequest(save_RAP_url,e,!1)}function chechForCheckAll(){$(".check-all").each(function(){checkCheckAll($("."+$(this).attr("data-child-class")))})}function checkCheckAll(e){var t=$(e).attr("class").split(" ").pop(),n=!0;$("."+t).each(function(){$(this).parent().hasClass("checked")||(n=!1)}),n&&$('input[data-child-class="'+t+'"]').parent().addClass("checked")}function menuHandle(){$("ul.nav li.dropdown").hover(function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(100).fadeIn(100)},function(){$(this).find(".dropdown-menu").stop(!0,!0).delay(100).fadeOut(100)}),$(".dropdown-menu a").click(function(){$(".dropdown-menu li").each(function(e){$(this).removeClass("active")}),$(this).parent().addClass("active")}),$("div.alert").not(".alert-important").delay(3e3).fadeOut(350)}function searchData(){var t="";$(document).on("keyup","#search",function(e){13==e.keyCode&&($("#search").val()&&(t=$("#search").val()),window.location.href=search_role_url+"/"+t)})}function saveActions(){$(document).on("click","#save-actions",function(e){e.preventDefault();var t=$("#rap-actions-form").serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});AJAX.AjaxHelper.POSTRequest(save_action_url,t,!1),$("#action-fields").modal("hide"),assignDataForFields("",module_id,""),reloadPageWithMessage(store_trans,!0)})}function editActions(){$(document).on("click","#edit-action",function(){var e={id:$(this).attr("data-id"),module_id:module_id};action=AJAX.AjaxHelper.GETRequest(edit_action_url,e,!1),$("#action-fields").modal("show"),assignDataForFields(action[0].id,action[0].module_id,action[0].action)})}function deleteAction(){$(document).on("click","#delete-action",function(){if(confirm("Do you want to delete.?")){var e={id:$(this).attr("data-id")};AJAX.AjaxHelper.GETRequest(delete_action_url,e,!1),reloadPageWithMessage(destroy_trans, !0)}})}function reloadPageWithMessage(e,t){$("#alert-msg").removeAttr("style"),$("div.alert-success").text(e),$("div.alert").not(".alert-important").delay(3e3).fadeOut(500),t&&setTimeout(function(){location.reload()},700)}function assignDataForFields(e,t,n){$("#id").val(e),$("#module_id").val(t),$("#action").val(n)}function closeModel(){$(document).on("click",".close-model",function(){assignDataForFields("",module_id,"")})}$(document).ready(function(){menuHandle(),searchData(),chechForCheckAll(),saveActions(),editActions(),closeModel(),deleteAction(),$(document).on("ifUnchecked",".permission",function(){var e=$(this).attr("class").split(" ").pop();$('input[data-child-class="'+e+'"]').parent().removeClass("checked")}),$(document).on("ifChecked",".permission",function(){var e=$(this);setTimeout(function(){checkCheckAll(e)},100)}),$(document).on("change","#rap_modules",function(){SaveRAP();var e={module_id:$(this).val(),role_id:roll_id};actions=AJAX.AjaxHelper.POSTRequest(get_action_url,e,!1),$("#action").html(actions),setTimeout(function(){chechForCheckAll()},100)}),ifChecked(".check-all"),ifUnchecked(".check-all"),$(document).on("submit","#roles-and-permission",function(e){e.preventDefault(),SaveRAP(),reloadPageWithMessage(store_trans,!1)}),$(document).on("ifChecked","#select_all",function(e,t){$("#rap_modules > option").prop("selected","selected"),$("#rap_modules").trigger("change")}),$(document).on("ifUnchecked","#select_all",function(e,t){$("#rap_modules").val(null).trigger("change")})});